<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-mail Marketing - Engajamentos</title>
    <link rel="stylesheet" href="../css/tailwind.output.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">
    <div class="flex min-h-screen">
      <!-- Sidebar -->
      <nav class="w-64 bg-gray-800 flex-shrink-0 flex flex-col py-6 px-4 min-h-screen text-gray-100">
        <div class="flex items-center mb-8">
          <span class="text-2xl font-bold text-blue-400">Programa de Indicação</span>
        </div>
        <ul class="space-y-2 flex-1">
          <li><a href="dashboard.html" class="flex items-center pl-4 px-3 py-2 rounded-lg hover:bg-gray-700"><i class="fas fa-chart-line mr-2"></i> Dashboard</a></li>
          <li><a href="my-data.html" class="flex items-center pl-4 px-3 py-2 rounded-lg hover:bg-gray-700"><i class="fas fa-user mr-2"></i> Meus dados</a></li>
          <li><a href="participants.html" class="flex items-center pl-4 px-3 py-2 rounded-lg hover:bg-gray-700"><i class="fas fa-users mr-2"></i> Central de Participantes</a></li>
          <li><a href="lp-indicadores.html" class="flex items-center pl-4 px-3 py-2 rounded-lg hover:bg-gray-700"><i class="fas fa-clipboard-list mr-2"></i> LP de Indicadores</a></li>
          <li><a href="rewards.html" class="flex items-center pl-4 px-3 py-2 rounded-lg hover:bg-gray-700"><i class="fas fa-gift mr-2"></i> Recompensas</a></li>
          <li><a href="lp-divulgacao.html" class="flex items-center pl-4 px-3 py-2 rounded-lg hover:bg-gray-700"><i class="fas fa-bullhorn mr-2"></i> LP de divulgação</a></li>
          <li><a href="campaigns.html" class="flex items-center pl-4 px-3 py-2 rounded-lg hover:bg-gray-700"><i class="fas fa-rocket mr-2"></i> Campanhas</a></li>
          <li><a href="engagements.html" class="flex items-center pl-4 px-3 py-2 rounded-lg bg-gray-800 text-blue-400 font-semibold"><i class="fas fa-chart-bar mr-2"></i> Engajamentos</a></li>
          <li><a href="referrals.html" class="flex items-center pl-4 px-3 py-2 rounded-lg hover:bg-gray-700"><i class="fas fa-user-plus mr-2"></i> Gestão de Leads</a></li>
          <!-- Início do novo menu Financeiro -->
          <li>
            <div class="flex items-center pl-4 px-3 py-2 rounded-lg hover:bg-gray-700 cursor-pointer group" onclick="toggleFinanceMenu()">
              <i class="fas fa-wallet mr-2"></i> Financeiro
              <span class="ml-2"></span><i class="fas fa-chevron-right transition-transform duration-200" id="financeArrow" style="transform: rotate(0deg);"></i>
            </div>
            <ul id="financeMenu" class="ml-8 mt-1 space-y-1 hidden">
              <li><a href="carteira.html" class="flex items-center pl-10 py-2 rounded-lg hover:bg-gray-700"><i class="fas fa-piggy-bank mr-2"></i> Carteira</a></li>
              <li><a href="payments.html" class="flex items-center pl-10 py-2 rounded-lg hover:bg-gray-700"><i class="fas fa-money-bill-wave mr-2"></i> Pagamentos</a></li>
            </ul>
          </li>
          <!-- Fim do novo menu Financeiro -->
          <li><a href="settings.html" class="flex items-center pl-4 px-3 py-2 rounded-lg hover:bg-gray-700"><i class="fas fa-cog mr-2"></i> Configurações</a></li>
          <li><a href="#" onclick="logout()" class="flex items-center pl-4 px-3 py-2 rounded-lg hover:bg-gray-700"><i class="fas fa-sign-out-alt mr-2"></i> Sair</a></li>
        </ul>
      </nav>
      <!-- Main Content -->
      <main class="flex-1 p-8">
        <!-- Header -->
        <div class="mb-8">
          <div class="flex items-center justify-between">
            <div>
              <h1 class="text-3xl font-bold text-white mb-2">
                <i class="fas fa-envelope mr-3 text-blue-400"></i>
                E-mail Marketing
              </h1>
              <p class="text-gray-400">Configure e gerencie suas campanhas de e-mail para engajar indicadores</p>
            </div>
            <div class="flex space-x-3">
              <button onclick="backToEngagements()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors">
                <i class="fas fa-arrow-left mr-2"></i>Voltar
              </button>
              <button onclick="createWelcomeEmail()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors">
                <i class="fas fa-envelope mr-2"></i>E-mail Boas-vindas
              </button>
              <button onclick="createEmailCampaign()" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors">
                <i class="fas fa-bullhorn mr-2"></i>Nova Campanha
              </button>
              <button onclick="createEmailFlow()" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg transition-colors">
                <i class="fas fa-project-diagram mr-2"></i>Fluxo Automático
              </button>
            </div>
          </div>
        </div>

        <!-- Email Templates Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
          <!-- Welcome Email Template -->
          <div class="bg-gray-800 rounded-lg p-6">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-xl font-bold text-white">
                <i class="fas fa-handshake mr-2 text-green-400"></i>
                E-mail de Boas-vindas
              </h3>
              <div class="flex items-center space-x-2">
                <span id="welcomeEmailStatus" class="px-2 py-1 text-xs rounded-full bg-green-500/20 text-green-400">Ativo</span>
                <button onclick="toggleWelcomeEmail()" class="text-gray-400 hover:text-white">
                  <i class="fas fa-toggle-on"></i>
                </button>
              </div>
            </div>
            
            <p class="text-gray-400 mb-4">E-mail automático enviado aos novos indicadores com instruções e link exclusivo</p>
            
            <div class="space-y-3 mb-4">
              <div class="flex items-center justify-between">
                <span class="text-sm text-gray-300">Enviados hoje:</span>
                <span id="welcomeEmailsToday" class="text-sm text-white">0</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-sm text-gray-300">Taxa de abertura:</span>
                <span id="welcomeOpenRate" class="text-sm text-white">0%</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-sm text-gray-300">Última atualização:</span>
                <span id="welcomeLastUpdate" class="text-sm text-gray-400">Nunca</span>
              </div>
            </div>
            
            <div class="flex space-x-3">
              <button onclick="editWelcomeTemplate()" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors">
                <i class="fas fa-edit mr-2"></i>Editar Template
              </button>
              <button onclick="previewWelcomeEmail()" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded-lg transition-colors">
                <i class="fas fa-eye mr-2"></i>Visualizar
              </button>
            </div>
          </div>

          <!-- Campaign Templates -->
          <div class="bg-gray-800 rounded-lg p-6">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-xl font-bold text-white">
                <i class="fas fa-bullhorn mr-2 text-purple-400"></i>
                Campanhas de E-mail
              </h3>
              <span class="px-2 py-1 text-xs rounded-full bg-purple-500/20 text-purple-400">
                <span id="activeCampaignsCount">0</span> ativas
              </span>
            </div>
            
            <p class="text-gray-400 mb-4">Crie campanhas personalizadas para engajar seus indicadores</p>
            
            <div class="space-y-3 mb-4">
              <div class="flex items-center justify-between">
                <span class="text-sm text-gray-300">Total de campanhas:</span>
                <span id="totalCampaigns" class="text-sm text-white">0</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-sm text-gray-300">Última campanha:</span>
                <span id="lastCampaignDate" class="text-sm text-gray-400">Nunca</span>
              </div>
              <div class="flex items-center justify-between">
                <span class="text-sm text-gray-300">Taxa média de abertura:</span>
                <span id="avgOpenRate" class="text-sm text-white">0%</span>
              </div>
            </div>
            
            <div class="flex space-x-3">
              <button onclick="createNewCampaign()" class="flex-1 bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-lg transition-colors">
                <i class="fas fa-plus mr-2"></i>Nova Campanha
              </button>
              <button onclick="viewAllCampaigns()" class="flex-1 bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded-lg transition-colors">
                <i class="fas fa-list mr-2"></i>Ver Todas
              </button>
            </div>
          </div>
        </div>

        <!-- Email Lists Section -->
        <div class="bg-gray-800 rounded-lg p-6 mb-8">
          <h3 class="text-xl font-bold text-white mb-4">
            <i class="fas fa-users mr-2 text-blue-400"></i>
            Listas de Indicadores
          </h3>
          
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="emailLists">
            <!-- Lista será carregada dinamicamente -->
          </div>
          
          <div class="mt-4 text-center">
            <button onclick="refreshLists()" class="bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded-lg transition-colors">
              <i class="fas fa-sync-alt mr-2"></i>Atualizar Listas
            </button>
          </div>
        </div>

        <!-- Recent Activity -->
        <div class="bg-gray-800 rounded-lg p-6">
          <h3 class="text-xl font-bold text-white mb-4">
            <i class="fas fa-history mr-2 text-blue-400"></i>
            Atividade Recente
          </h3>
          <div id="recentEmailActivity" class="space-y-3">
            <!-- Atividade será carregada dinamicamente -->
          </div>
        </div>
      </main>
    </div>

    <script src="../js/config.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/engajamento-email-marketing.js"></script>
    <script>
      // Toggle Finance Menu
      function toggleFinanceMenu() {
        const menu = document.getElementById('financeMenu');
        const arrow = document.getElementById('financeArrow');
        menu.classList.toggle('hidden');
        arrow.style.transform = menu.classList.contains('hidden') ? 'rotate(0deg)' : 'rotate(90deg)';
      }

      // Logout function
      function logout() {
        localStorage.removeItem('clientToken');
        localStorage.removeItem('clientData');
        localStorage.removeItem('clientId');
        window.location.href = 'login.html';
      }
    </script>
</body>
</html> 